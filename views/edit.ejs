<% include ./partials/header.ejs %>


<style>
    label{
        font-weight: 900;
    }
    .form-control{
        border: 2px solid black;
    }
    .form-control:focus{
        box-shadow: none;
    }
    #buttonsofedit{
        display: flex;
        justify-content: space-between;
    }
</style>

 <div id="right">
    <form action="/updateprofile" method="post">

        <div class="container py-5 px-5">
        <h3>Edit Your Profile</h3>
        <br>
        <div class="row">
            <div class="col col-md-6">
                <div class="mb-3">
                <label for="exampleFormControlInput1" class="form-label">Your Email </label>
                <input disabled type="email" class="form-control" id="exampleFormControlInput1" placeholder="<%= user.email%>">
                </div>
            </div>
            
        </div>
        <div class="row">
            <div class="col col-md-6">
                <div class="mb-3">
         <label for="exampleFormControlInput1" class="form-label">Username</label>
         <input type="text" class="form-control" name="username" id="username" value="<%= user.username%>">
        </div>
            </div>
        </div>
        
        <div class="row">
            <div class="col col-md-6">
                 <div class="mb-3">
         <label for="exampleFormControlInput1" class="form-label">Profession</label>
         <input type="text" class="form-control" name="profession" id="exampleFormControlInput1" value="<%= user.profession%>">
        </div>
            </div>
        </div>
        <br>
        <div class="row">

            <div id="buttonsofedit" class="col col-md-6">
                <button  type="submit" id="submit" class="btn btn-warning">Update-Profile</button>
                <a href="/editback" class="btn btn-primary"> Cancel</a>
            </div>
        </div>
    </div>
    </form>
 </div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.5.1/axios.min.js" integrity="sha512-emSwuKiMyYedRwflbZB2ghzX8Cw8fmNVgZ6yQNNXXagFzFOaQmbvQ1vmDkddHjm5AITcBIZfC7k4ShQSjgPAmQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>

  var val = document.querySelector("#username")
  val.addEventListener('input',function(){
    if(val.value.length > 0){
        axios.get(`/valininput/${val.value}`).then(function(resp){
            if(resp.data){
                val.style.borderColor = "#ef1414ab"   ;  
                document.querySelector("#submit").setAttribute("disabled" , true)
            }
            else{
                val.style.borderColor = "green"   ; 
                document.querySelector("#submit").removeAttribute("disabled" , true)
            }
        })
    }
    else{
             val.style.borderColor = "initial"  ;
    }
  })

</script>

<% include ./partials/footer.ejs %>
